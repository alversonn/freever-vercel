generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model PatientRecord {
  id                  Int      @id @default(autoincrement())
  createdAt           DateTime @default(now())
  name                String
  age                 Int
  gender              String
  dateOfBirth         DateTime
  pulseWeak           Boolean
  consciousnessPoor   Boolean
  oxygenSaturation    Float
  leukocyteCount      Float
  neutrophilCount     Float
  lymphocyteCount     Float
  crpLevel            Float?
  feverDuration       Int
  nlcrResult          Float
  nausea              Boolean  @default(false)
  vomiting            Boolean  @default(false)
  lossOfAppetite      Boolean  @default(false)
  severeBleeding      Boolean  @default(false)
  respiratoryProblems Boolean  @default(false)
  seizure             Boolean  @default(false)
  severeDehydration   Boolean  @default(false)
  shockSign           Boolean  @default(false)
  diagnosis           String
  recommendation      String
  sensitivity         Float    @default(0)
  specificity         Float    @default(0)
  userId              String
  user                User     @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([userId])
  @@index([userId], map: "patient_records_userid_idx")
  @@map("patient_records")
}

model User {
  id             String          @id @default(cuid())
  createdAt      DateTime        @default(now())
  name           String
  username       String          @unique
  email          String?         @unique
  phone          String?         @unique
  birthPlace     String
  dateOfBirth    DateTime?
  gender         String?
  institution    String
  hashedPassword String
  records        PatientRecord[]
}
